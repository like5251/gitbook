# 排序
> 排序就是使列表元素按照关键字递增或递减排列的过程。排序算法的时间复杂度一般是由比较和移动的次数决定的。

## 各种排序算法综述
- 内部排序：在排序期间所有元素都存放在内存中的排序
- 外部排序：排序元素无法全部同时存放在内存中，需根据要求不断地在内存、外存之间移动的排序
- 比较排序：各元素的次序依赖于它们之间的比较，我们所介绍的大多数都属于比较排序，比较排序的时间复杂度一般是由比较和移动的次数决定。任何比较排序的最坏时间复杂度都至少要做O(nlgn)次比较
- 分配排序：计数排序、基数排序、桶排序，它们通过运算而不是比较来确定排序顺序

![](/assets/排序全.png)

### 比较排序
- 比较排序算法的下界：可以用决策树来描述比较排序过程，每种排序结果对应决策树的一个叶节点，决策树高度代表比较算法的平均时间复杂度。对于含n个元素的列表，总共有n!种可能结果，即决策树含有n!个叶节点，$$2^{h}\geqslant n!$$，由斯特林公式得：

$$
h\geqslant lg(n!) = \Omega (nlgn)
$$

- 比较排序性能：堆排序、归并排序都是渐进最优的比较排序算法，快速排序是平均性能最好的比较排序算法。

- **插入排序**：每次将一个待排元素插入到前面已排序列中，直至全部插入
    - **直接插入排序（Insert sort）**：从1到n依次将待排元素插入到前面已排序列中，每次插入时，从后向前遍历已排序列，如果大于待排元素则后移一位，如果不大于待排元素或达到首部则插入待排元素
    - **折半插入排序**：折半插入是直接插入的一个变种，在每次插入新的待排元素时，先使用二分查找在前面有序序列中找到插入位置，再统一移动插入位置到旧位置间的元素，最后插入待排元素
    - **希尔插入排序（Shell sort）**：按步长从n/2到1，反复进行直接插入排序
- **交换排序**：根据序列中两个元素的比较结果来交换它们的位置
    - **冒泡排序（Bubble sort）**:从前向后两两比较相邻元素，若逆序则交换；每轮冒泡都将当前最大元素排到最终位置（该元素不再参与下一轮排序），某轮冒泡不再发生交换或n轮冒泡后则排序成功。
    - **快速排序（Quik sort）**：基于分治和递归的思想，任选一个元素作为枢轴点，将所有小于它的元素都放在它前面，所有大于它的元素都放在后面，将枢轴点放在其最终位置，然后再递归排序枢轴点左右两侧子序列
- **选择排序**：每次从当前待排序列中选择最小元素将其交换到首位，n-1轮完成排
    - **简单选择排序（Selection sort）**：每轮从A[i:]中选出最小元素与A[i]交换，i= 0...n-2
    - **堆排序（Heap sort）**：首先通过从n/2到1依次向下调整建立堆，每轮交换堆顶和堆底元素，将堆长度减1，堆顶向下调整，n-1轮后堆中只剩一个元素，排序完成
- **归并排序（Merge sort）**：二路归并排序基于分治和递归的思想，首先将序列分解为左右两个子序列，分别对左右子序列进行归并排序，再归并左右两个已排序序列

### 分配排序
分配排序包括计数排序、基数排序和桶排序。它们基于运算而不是比较来确定排序顺序，下界$$\Omega (nlgn)$$对它们不适用。每种分配排序对输入数据做了不同假设，在对应的假设下分配排序的时空复杂度为O(n)。
- **计数排序（Counting sort）**：假设输入数据都分布在一个较小的区间，通过统计序列中小于等于该元素的元素个数，将该元素放置于对应位置；
- **基数排序（Radix sort）**：假设输入数据是具有多关键字域的记录，通过低位优先/高位优先，每轮将各条记录按照关键字分配到对应基数队列中，再通过将队列首尾相连收集所有元素；
- **桶排序（Bucket sort）**：假设输入数据具有均匀分布，将整个元素区间划分为多个小区间（桶），将每个元素按照分配函数分配到每个桶中，对桶内元素进行排序之后，再将所有桶中的元素统一收集起来；


## python内置排序方法

### sort()方法
- 原型：list.sort(cmp=None, key=None, reverse=False)
- 功能：对列表进行原地排序
- 参数：

参数|解释
---|---
cmp|比较函数，用于确定比较值的比较方式：接收一个函数，该函数必须满足有两个参数x,y，如果返回负数，说明第一个参数小，返回0说明两个参数相等，返回正数说明第一个参数大,函数还应具有确定性，x,y和y,x返回符号不能相同。默认参数为cmp(x,y)
key|权值函数，用于确定用于比较的值：是sort灵活性的来源，每次将列表中的元素传参给该函数，将该函数的返回值作为最终比较的值，权值函数的参数个数应与列表元素匹配
reverse|是否逆序，默认为升序，reverse=True则降序排列

- 返回值：None

- 应用举例
    - 多关键字排序list.sort(key = lambda x:(exp1,exp2))

### sorted()函数
- 原型：sorted(iterable, cmp=None, key=None, reverse=False)
- 功能：排序可迭代对象，返回排序后的列表
- 适用：不仅适用于列表，还适用于其他可迭代对象，如字符串、元组、字典、集合
- 参数：与sort()方法相同
- 返回值：排序后的列表

### reverse()方法
- 原型：list.reverse()
- 功能：对列表进行原地逆序
- 返回值：None

### reversed()函数
- 原型：reversed(iterable)
- 功能：对列表进行原地逆序
- 返回值：生成新的可迭代对象

## 参考
[1] [排序算法可视化](http://www.cs.usfca.edu/~galles/visualization/ComparisonSort.html)